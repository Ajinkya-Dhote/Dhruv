<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Server Messages in OData V4 Model</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="The OData V4 model supports server messages sent via an OData V4 service."><meta name="description" content="The OData V4 model supports server messages sent via an OData V4 service."><meta name="content category" content="development"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"96804e3315ff440aa0a50fd290805116.html","previousTopicHref":"7d914317c0b64c23824bf932cc8a4ae1.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loiofbe1cb5613cf4a40a841750bf813238e"><h1 class="title topictitle1" hidden>Server Messages in OData V4 Model</h1><div class="body conbody"><p class="shortdesc" hidden>The OData V4 model supports server messages sent via an OData V4 service.</p>
<aside class="note caution" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Caution</strong></div>
<p>This feature is experimental. For more information, see <a class="xref" href="../../#/topic/91f087396f4d1014b6dd926db0e91070.html" title="The following sections describe what SAP can change in major, minor, and patch releases. Always consider these rules when developing apps, features, or controls with or for OpenUI5." target="_top">Compatibility Rules</a>.</p></aside>
<p class="p">Messages transported via an OData V4 service response are parsed and reported to the message
model. Applications can retrieve the messages and display them in a suitable control,
for example in <samp class="ph codeph">sap.m.MessageView</samp>.</p>
<div class="section" id="loiofbe1cb5613cf4a40a841750bf813238e__section_jrv_5wm_2fb"><section class="section" type="Bound Messages and Unbound Messages in Success Responses"><h2 class="section_title" style="font-size: 1.15em;">Bound Messages and Unbound Messages in Success Responses</h2><div class="sectiondiv subsection">
<p class="p subsectiontitle">Unbound Messages</p>
<p class="p">Unbound messages are not related to OData entities and are, therefore, also not
part of the OData response in the HTTP body. Instead, they are transported in
the header field <samp class="ph codeph">sap-messages</samp>, which is an array of messages.
The array should not contain more than 20 messages due to size limitations of
some browsers with respect to the maximum header size. Unbound messages cannot
be suppressed, they are always returned by the server and they always refer to
the current request, see section about transition messages below.</p>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Message Header and Message Structure for Unbound
Messages</p>
<p class="p">In case of successful requests, unbound messages are transported as an array in
the HTTP header field <samp class="ph codeph">sap-messages</samp> with following format. (Note
that the linebreaks are only inserted for readability; the actual header value
cannot contain line breaks.)</p>
<pre class="pre codeblock prettyprint">sap-messages:[
     {
          &quot;code&quot; : &quot;SYS/42&quot;,
          &quot;message&quot; : &quot;System will be down for maintenance next weekend.&quot;,
          &quot;numericSeverity&quot; : 2,
          &quot;longtextUrl&quot; : &quot;Messages(3)/LongText/$value&quot;
     }
]</pre>
<p class="p">The properties code and message are defined by <samp class="ph codeph">com.sap.vocabularies.Common.v1.Messages</samp>.</p>
<p class="p">For more information about the <samp class="ph codeph">numericSeverity</samp> property, see the
section about message severity.</p>
<p class="p">The <samp class="ph codeph">longtextUrl</samp> is optional and should be omitted, if there is
no long text available for the corresponding message.</p>
<aside class="note" aria-labelledby="note_1_title"><div class="title" id="note_1_title"><strong>Note</strong></div>
<p class="p">The <samp class="ph codeph">longtextUrl</samp> can be a relative or absolute path. Relative
paths are treated as relative to the request URL. Absolute paths are treated
as relative to the server.</p><p class="p">Example:</p><p class="p">Request URL:
<span class="ph filepath">http://&lt;server&gt;:&lt;port&gt;/serviceroot.svc/BusinessPartners(42)/to_Address;
longtextUrl: &quot;Messages(3)/LongText/$value&quot;</span></p><p class="p">Result:
<span class="ph filepath">http://&lt;server&gt;:&lt;port&gt;/serviceroot.svc/BusinessPartners(42)/Messages(3)/LongText/$value</span></p><p class="p">Request URL:
<span class="ph filepath">http://&lt;server&gt;:&lt;port&gt;/serviceroot.svc/BusinessPartners(42);
longtextUrl: &quot;/Messages(3)/LongText/$value&quot;</span></p><p class="p">Result:
<span class="ph filepath">http://&lt;server&gt;:&lt;port&gt;/Messages(3)/LongText/$value</span></p></aside>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Bound Messages</p>
<p class="p">Bound messages are related to OData entities. They are themselves modeled as
OData resources. An OData entity contains its bound messages as collection
valued property of a complex type for a message. Thus, bound messages are
transported in the HTTP body. The OData V4 service identifies the property
containing the message collection by the dedicated metadata annotation
<samp class="ph codeph">com.sap.vocabularies.Common.v1.Messages</samp>. The target
property specifies to which property the message is bound. The client needs to
specify in the <samp class="ph codeph">$select</samp> query option whether messages should be
returned by the server, or not.</p>
<pre class="pre codeblock prettyprint">1  &lt;EntityType Name=&quot;Order&quot;&gt;
2      &lt;Property Name=&quot;my_messages&quot; Type=&quot;Collection(self.MessageType)&quot;/&gt;
3      &lt;Annotation Term=&quot;Common.Messages&quot; Path=&quot;my_messages&quot;/&gt;
4  &lt;/EntityType&gt;</pre>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Message Structure for Bound Messages</p>
<pre class="pre codeblock prettyprint">1  &lt;ComplexType Name=&quot;&lt;name of message type&gt;&quot;&gt;
2      &lt;Property Name=&quot;code&quot; Type=&quot;Edm.String&quot; Nullable=&quot;false&quot; /&gt;
3      &lt;Property Name=&quot;message&quot; Type=&quot;Edm.String&quot; Nullable=&quot;false&quot; /&gt;
4      &lt;Property Name=&quot;target&quot; Type=&quot;Edm.String&quot; Nullable=&quot;true&quot; /&gt;
5      &lt;Property Name=&quot;transition&quot; Type=&quot;Edm.Boolean&quot; Nullable=&quot;false&quot; /&gt;
6      &lt;Property Name=&quot;numericSeverity&quot; Type=&quot;Edm.Byte&quot; Nullable=&quot;false&quot; /&gt;
7      &lt;Property Name=&quot;longtextUrl&quot; Type=&quot;Edm.String&quot; Nullable=&quot;true&quot; /&gt;
8  &lt;/ComplexType&gt;</pre>
<p class="p">The properties code and message are defined by
<samp class="ph codeph">com.sap.vocabularies.Common.v1.Messages</samp>, see <a class="xref" href="https://wiki.scn.sap.com/wiki/display/EmTech/OData+4.0+Vocabularies+-+SAP+Common" target="_blank" alt="https://wiki.scn.sap.com/wiki/display/EmTech/OData+4.0+Vocabularies+-+SAP+Common" title="https://wiki.scn.sap.com/wiki/display/EmTech/OData+4.0+Vocabularies+-+SAP+Common">OData V4.0 Vocabularies- SAP
Common</a>.</p>
<p class="p">The property target may contain a path relative to the entity which contains the
message. The target can, for example, refer to a property within that entity.
This information will be used to highlight UI elements such as input fields if
they are bound to properties referenced by the path contained in the target
property.</p>
<p class="p">For more information regarding the <samp class="ph codeph">numericSeverity</samp> property, see
the section about message severity.</p>
<p class="p">The <samp class="ph codeph">longtextUrl</samp> is optional and should be omitted if there is no
long text available for the corresponding message.</p>
<aside class="note" aria-labelledby="note_2_title"><div class="title" id="note_2_title"><strong>Note</strong></div>
<p class="p">The <samp class="ph codeph">longtextUrl</samp> can be a relative or absolute path. Relative
paths will be treated as relative to the innermost context path
(<samp class="ph codeph">@odata.context</samp>) in the response, or to the request URL
if there is no context path. Absolute paths will be treated as relative to
the server.</p><p class="p">All responses for read requests are checked for bound messages. If there are
messages they are reported to the message model. Responses for
<samp class="ph codeph">create</samp> and <samp class="ph codeph">update</samp> are not checked for
bound messages.</p></aside>
</div></section></div>
<div class="section" id="loiofbe1cb5613cf4a40a841750bf813238e__section_lnt_hym_2fb"><section class="section" type="State Messages and Transition Messages"><h2 class="section_title" style="font-size: 1.15em;">State Messages and Transition Messages</h2><div class="sectiondiv subsection">
<p class="p subsectiontitle">State Messages</p>
<p class="p">State messages refer to the state of the corresponding resource (OData entity instance).
State messages are valid as long as the related business object is not changed.
The OData V4 Model is responsible for the lifecycle of state messages and will
remove state messages from the message model, if they are no longer sent by the
server when the corresponding resource is requested.</p>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Transition messages</p>
<p class="p">Transition messages refer to the current request and are not related to the state
of a resource. They are only relevant for the request that was triggered.</p>
<p class="p">Example: <span class="ph uicontrol">System not available, business object could not be
updated</span>.</p>
<p class="p">Transition messages can optionally reference a business object.</p>
<p class="p">Example: <span class="ph uicontrol">Shipping address could not be changed due to missing
authorization</span></p>
<p class="p">Transition messages are translated into persistent messages in the message model. The
application is responsible for the lifecycle of such persistent messages. The
OData V4 Model will not remove persistent messages from the message model.</p>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Combination State/Transition and Bound/Unbound</p>
<div class="table-wrapper tablenoborder"><table summary id="loiofbe1cb5613cf4a40a841750bf813238e__table_mt4_kym_2fb" class="table" frame="border" border="1" rules="all"><colgroup><col width="33.333333333333336%"><col width="33.333333333333336%"><col width="33.333333333333336%"></colgroup><thead class="thead" style="text-align:left;">
<tr class="row">
<th class="entry" style="vertical-align:top;" id="d156124e244">&#xA0;</th>
<th class="entry" style="vertical-align:top;" id="d156124e246">State</th>
<th class="entry" style="vertical-align:top;" id="d156124e249">Transition</th>
</tr>
</thead><tbody class="tbody">
<tr class="row">
<td class="entry" style="vertical-align:top;" headers="d156124e244 ">Unbound</td>
<td class="entry" style="vertical-align:top;" headers="d156124e246 "><img class="inline" id="loiofbe1cb5613cf4a40a841750bf813238e__image_qgz_1xr_gfb" src="loio38d78b4d740c43719a4eb8d80d4184e0_LowRes.png"></td>
<td class="entry" style="vertical-align:top;" headers="d156124e249 "><img class="inline" id="loiofbe1cb5613cf4a40a841750bf813238e__image_szd_1xr_gfb" src="loio0d13ebb7aa8b4bf8b5c56acfa02653ef_LowRes.png"></td>
</tr>
<tr class="row">
<td class="entry" style="vertical-align:top;" headers="d156124e244 ">Bound</td>
<td class="entry" style="vertical-align:top;" headers="d156124e246 "><img class="inline" id="loiofbe1cb5613cf4a40a841750bf813238e__image_j4l_xwr_gfb" src="loio0d13ebb7aa8b4bf8b5c56acfa02653ef_LowRes.png"></td>
<td class="entry" style="vertical-align:top;" headers="d156124e249 "><img class="inline" id="loiofbe1cb5613cf4a40a841750bf813238e__image_qfp_zwr_gfb" src="loio0d13ebb7aa8b4bf8b5c56acfa02653ef_LowRes.png"></td>
</tr>
</tbody></table></div>
</div></section></div>
<div class="section" id="loiofbe1cb5613cf4a40a841750bf813238e__section_kxc_pp3_ffb"><section class="section" type="Message Severity"><h2 class="section_title" style="font-size: 1.15em;">Message Severity</h2>

<p class="p">The table shows the supported severity values and their mapping to the specific
<samp class="ph codeph">sap.ui.core.MessageType</samp>.</p>
<div class="table-wrapper tablenoborder"><table summary id="loiofbe1cb5613cf4a40a841750bf813238e__table_g4s_vym_2fb" class="table" frame="border" border="1" rules="all"><colgroup><col width="33.333333333333336%"><col width="33.333333333333336%"><col width="33.333333333333336%"></colgroup><thead class="thead" style="text-align:left;">
<tr class="row">
<th class="entry" style="vertical-align:top;" id="d156124e309">numericSeverity</th>
<th class="entry" style="vertical-align:top;" id="d156124e312">Type</th>
<th class="entry" style="vertical-align:top;" id="d156124e315">Comment</th>
</tr>
</thead><tbody class="tbody">
<tr class="row">
<td class="entry" style="vertical-align:top;" headers="d156124e309 ">1</td>
<td class="entry" style="vertical-align:top;" headers="d156124e312 "><samp class="ph codeph">sap.ui.core.MessageType.Success</samp></td>
<td class="entry" style="vertical-align:top;" headers="d156124e315 ">
<p class="p">Positive feedback - no action required</p>
</td>
</tr>
<tr class="row">
<td class="entry" style="vertical-align:top;" headers="d156124e309 ">2</td>
<td class="entry" style="vertical-align:top;" headers="d156124e312 "><samp class="ph codeph">sap.ui.core.MessageType.Information</samp></td>
<td class="entry" style="vertical-align:top;" headers="d156124e315 ">
<p class="p">Additional information - no action required</p>
</td>
</tr>
<tr class="row">
<td class="entry" style="vertical-align:top;" headers="d156124e309 ">3</td>
<td class="entry" style="vertical-align:top;" headers="d156124e312 "><samp class="ph codeph">sap.ui.core.MessageType.Warning</samp></td>
<td class="entry" style="vertical-align:top;" headers="d156124e315 ">
<p class="p">Warning - action may be required</p>
</td>
</tr>
<tr class="row">
<td class="entry" style="vertical-align:top;" headers="d156124e309 ">4</td>
<td class="entry" style="vertical-align:top;" headers="d156124e312 "><samp class="ph codeph">sap.ui.core.MessageType.Error</samp></td>
<td class="entry" style="vertical-align:top;" headers="d156124e315 ">
<p class="p">Error - action is required</p>
</td>
</tr>
</tbody></table></div>
</section></div>
<div class="section" id="loiofbe1cb5613cf4a40a841750bf813238e__section_fmj_dw2_nfb"><section class="section" type="Messages in Error Responses"><h2 class="section_title" style="font-size: 1.15em;">Messages in Error Responses</h2><p class="p">In case of an
error, the message is always reported in the error response in JSON format as
described in the <em class="ph i">OData JSON Format Version 4.0</em> in section <em class="ph i">19 Error
Response</em>. Note the following additions:</p><ul class="ul" id="loiofbe1cb5613cf4a40a841750bf813238e__ul_vnn_4w2_nfb">
<li class="li">
<p class="p">The error message and all messages in details may have the
<samp class="ph codeph">com.sap.vocabularies.Common.v1.longtextUrl</samp> annotation
from the OData V4.0 Vocabularies- SAP Common to provide a longtext URL as
described above.</p>
</li>
<li class="li">
<p class="p">The longtext URL can be a relative or absolute path. Relative paths are
treated as relative to the request URL. Absolute paths are treated as
relative to the server.</p>
</li>
<li class="li">
<p class="p"><samp class="ph codeph">target</samp> is relative to the requested resource.</p>
</li>
<li class="li">
<p class="p">All messages details may have the <samp class="ph codeph">annotation
com.sap.vocabularies.Common.v1.numericSeverity</samp> from the OData
V4.0 Vocabularies- SAP Common.</p>
</li>
<li class="li">
<p class="p">The error message and all messages in details are transition messages.</p>
</li>
</ul>The error message is always of type type
<samp class="ph codeph">sap.ui.core.MessageType.Error</samp>. The message type of the detail
messages is determined by the numeric severity.</section></div>
</div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>